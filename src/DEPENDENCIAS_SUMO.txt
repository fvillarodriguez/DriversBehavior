Dependencias para ejecutar el pipeline SUMO
==========================================

Python (via `pip`)
------------------
Instala las librerías base del pipeline con:

```
python3 -m pip install \
    pandas \
    numpy \
    duckdb \
    tqdm \
    pyarrow==18.1.0 \
    sumo==1.24.0
```

- `pandas`, `numpy`, `tqdm` y `duckdb` son utilizados por la CLI (`main.py`) y las utilidades de carga en `src/utils.py`.
- `pyarrow==18.1.0` entrega las bibliotecas dinámicas `libarrow.1801.dylib` / `libparquet.1801.dylib` que el binario de SUMO necesita en macOS/Apple Silicon.
- `sumo==1.24.0` instala los binarios `sumo` y `sumo-gui` junto con sus herramientas CLI.

macOS / Homebrew
----------------
SUMO (instalado vía pip) depende de varias bibliotecas nativas que resolvemos con Homebrew:

```
brew install \
    xerces-c \
    proj \
    apache-arrow \
    fox \
    gdal \
    ffmpeg \
    open-scene-graph \
    gl2ps
```

Notas:
- `xerces-c` provee `libxerces-c-3.3.dylib`, requerido para parsers XML.
- `proj` entrega `libproj.25.dylib`.
- `apache-arrow` aporta cabeceras/archivos en `/opt/homebrew/opt/apache-arrow`, aunque las librerías en tiempo de ejecución se resuelven desde `pyarrow`.
- `fox`, `open-scene-graph`, `gl2ps` habilitan la interfaz gráfica de `sumo-gui`.
- `gdal` y `ffmpeg` son necesarios para las utilidades GIS/video que enlaza SUMO.

Variables de entorno
--------------------
Para que `sumo` y `sumo-gui` encuentren todas las bibliotecas en macOS (ARM), exporta lo siguiente en `~/.zshrc` y reabre la terminal:

```
export DYLD_LIBRARY_PATH="/opt/homebrew/opt/gl2ps/lib:\
/opt/homebrew/opt/open-scene-graph/lib:\
/opt/homebrew/opt/gdal/lib:\
/opt/homebrew/opt/ffmpeg/lib:\
$HOME/Library/Python/3.12/lib/python/site-packages/pyarrow:\
$DYLD_LIBRARY_PATH"
```

Verificaciones
--------------
1. `sumo --version` debe mostrar `Eclipse SUMO sumo Version 1.24.0`.
2. `sumo-gui -V` debe mostrar `Eclipse SUMO GUI Version 1.24.0`.
3. Ejecutar `python3 main.py` tras cargar los archivos CSV en `Datos/` permite comprobar el pipeline completo.
